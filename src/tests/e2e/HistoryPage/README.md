# E2E сценарии — Страница Истории

### ⚙️ **Общая логика**

- При заходе на страницу `/history` приложение загружает список отчётов из `localStorage` по ключу `reports`.
- Каждый отчёт рендерится как `data-testid="report-row"`.
- Для каждого отчёта видны:

  - Имя файла.
  - Дата.
  - Метка `Обработан успешно` или `Не удалось обработать`.

- Прозрачность:

  - Если `isValid = true` → `Обработан успешно` имеет `opacity: 1`, `Не удалось обработать` → `opacity: 0.5`.
  - Если `isValid = false` → наоборот.

- Если отчёт **успешный**, то он кликабелен:

  - Открывается диалог.
  - Внутри рендерятся хайлайты, как на главной (`data-testid="metrics-grid"`, `data-testid="metrics-row"`).
  - Есть кнопка `title="Закрыть"` — закрывает диалог.

- Если отчёт **неуспешный**, клик не открывает диалог.
- В каждой строке есть кнопка `title="Удалить"` — удаляет конкретный отчёт.
- Есть кнопка **Очистить все** — удаляет все отчёты.
- Есть кнопка **Сгенерировать больше** — редиректит на `/generate`.

---

## **1. Отображение отчётов**

| #   | Шаг                    | Описание                                                                            |
| --- | ---------------------- | ----------------------------------------------------------------------------------- |
| 1   | Открыть `/history`     | Зайти на страницу истории.                                                          |
| 2   | Проверить загрузку     | В `localStorage` заранее есть отчёты → на странице рендерятся `report-row`.         |
| 3   | Проверить подписи      | У каждого отчёта видны: имя, дата, `Обработан успешно` или `Не удалось обработать`. |
| 4   | Проверить прозрачность | Проверить CSS `opacity`: успешные = 1, неуспешные = 0.5.                            |

---

## **2. Клик по успешному отчёту**

| #   | Шаг                            | Описание                                         |
| --- | ------------------------------ | ------------------------------------------------ |
| 1   | Открыть `/history`             | Зайти на историю.                                |
| 2   | Кликнуть успешный `report-row` | Открывается диалог.                              |
| 3   | Проверить хайлайты             | В диалоге есть `metrics-grid` и `metrics-row`.   |
| 4   | Закрыть диалог                 | Кликнуть `title="Закрыть"` — диалог закрывается. |

---

## **3. Клик по неуспешному отчёту**

| #   | Шаг                              | Описание                                     |
| --- | -------------------------------- | -------------------------------------------- |
| 1   | Открыть `/history`               | Зайти на историю.                            |
| 2   | Кликнуть неуспешный `report-row` | Ничего не происходит, диалог не открывается. |

---

## **4. Удаление одного отчёта**

| #   | Шаг                                 | Описание                                   |
| --- | ----------------------------------- | ------------------------------------------ |
| 1   | Открыть `/history`                  | Зайти на историю.                          |
| 2   | Кликнуть `title="Удалить"` у отчёта | Запись исчезает со страницы.               |
| 3   | Проверить `localStorage`            | `reports` обновился без удалённого отчёта. |

---

## **5. Полная очистка**

| #   | Шаг                      | Описание                   |
| --- | ------------------------ | -------------------------- |
| 1   | Открыть `/history`       | Зайти на историю.          |
| 2   | Нажать **Очистить все**  | Все `report-row` исчезают. |
| 3   | Проверить `localStorage` | `reports` пустой массив.   |

---

## **6. Переход на генератор**

| #   | Шаг                             | Описание                            |
| --- | ------------------------------- | ----------------------------------- |
| 1   | Открыть `/history`              | Зайти на историю.                   |
| 2   | Нажать **Сгенерировать больше** | Происходит редирект на `/generate`. |

---

## **Итоговый список сценариев**

| ID  | Название                   | Тип        |
| --- | -------------------------- | ---------- |
| 1   | Загрузка и отображение     | Позитивный |
| 2   | Клик по успешному отчету   | Позитивный |
| 3   | Клик по неуспешному отчету | Негативный |
| 4   | Удаление одного отчёта     | Позитивный |
| 5   | Очистка всех               | Позитивный |
| 6   | Переход на генератор       | Позитивный |
