# E2E сценарии — Страница генерации

### **Общая логика**

- Есть кнопка **«Начать генерацию»**.
- При клике:

  - Кнопка остаётся на месте и становится неактивной.
  - Внутри кнопки появляется **loader**.
  - В `data-testid="generate-status"` — текст **«идёт процесс генерации»**.

- После завершения генерации:

  - В `generate-status` появляется **«готово»**.
  - Кнопка меняет текст на **Done!**
  - Появляется кнопка **«Сбросить»**.

- Если запрос прерван (сетевая ошибка):

  - В кнопке текст **«Ошибка»**.
  - В `generate-status` — текст ошибки.
  - Loader скрывается.

- После клика **«Сбросить»**:

  - Кнопка возвращается в исходное состояние.
  - Loader скрыт.
  - Статус сброшен.

---

## 1. Успешная генерация

| #   | Шаг                           | Описание                                                                           |
| --- | ----------------------------- | ---------------------------------------------------------------------------------- |
| 1   | Открыть `/generate`           | Перейти на страницу генерации                                                      |
| 2   | Проверить начальное состояние | Кнопка видна, loader и сброс скрыты, `generate-status` пустой                      |
| 3   | Нажать «Начать генерацию»     | Кнопка становится неактивной, появляется loader, статус = «идёт процесс генерации» |
| 4   | Дождаться результата          | После завершения в кнопке текст «Done!», `generate-status` = «готово»              |
| 5   | Проверить «Сбросить»          | Кнопка «Сбросить» видна                                                            |

---

## 2️. Ошибка сети

| #   | Шаг                           | Описание                                                            |
| --- | ----------------------------- | ------------------------------------------------------------------- |
| 1   | Открыть `/generate`           | Перейти на страницу генерации                                       |
| 2   | Проверить начальное состояние | Кнопка активна, loader и сброс скрыты                               |
| 3   | Нажать «Начать генерацию»     | Запускается loader, статус = «идёт процесс генерации»               |
| 4   | Эмулировать обрыв сети        | Запрос `route.abort` с небольшой задержкой                          |
| 5   | Проверить результат           | Кнопка показывает «Ошибка», `generate-status` содержит текст ошибки |

---

## 3️. Очистка состояния

| #   | Шаг                       | Описание                                                        |
| --- | ------------------------- | --------------------------------------------------------------- |
| 1   | Открыть `/generate`       | Перейти на страницу генерации                                   |
| 2   | Нажать «Начать генерацию» | Запускается генерация, loader виден                             |
| 3   | Дождаться окончания       | Появляется «Done!», статус = «готово»                           |
| 4   | Нажать «Сбросить»         | Всё возвращается в начальное состояние                          |
| 5   | Проверить сброс           | Кнопка «Начать генерацию» снова активна, loader и статус скрыты |

---

## Итоговый список сценариев

| ID  | Название                  | Тип        |
| --- | ------------------------- | ---------- |
| 1   | Успешная генерация        | Позитивный |
| 2   | Ошибка сети при генерации | Негативный |
| 3   | Очистка состояния         | Позитивный |
